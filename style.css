/* =========================================================
   NDC OC LP - FULL CSS (Gooey + 3% Frosted Glass 対応)
   ---------------------------------------------------------
   ・Gooey ON: <body class="fx-gooey"> で適用
   ・“3%”のニュアンス：blur(3px) + 白膜 6%
   ・ヒーローの顔に帯がかからないよう、heroの下詰め＆タイトル縁取りは黒→深群青
   ・ガラス系UIは透明度を上げ、読みやすさは維持
   ========================================================= */

/* ===== Reset / Base ===== */
*{box-sizing:border-box}
html,body{margin:0}
img{max-width:100%;display:block;height:auto}

/* ===== Theme Vars ===== */
:root{
  --ink:#0b1224; --muted:#6b7280;
  --blue:#1480ff; --blue2:#0f6de0;
  --line:#00c100; --line2:#00a400;
  --blk:#111; --blk2:#0b0b0b;

  --brandStart:#6a59ff;  /* 日程ピルの紫（明） */
  --brandEnd:#8b7cff;    /* 日程ピルの紫（暗） */

  --shadow:0 14px 34px rgba(15,23,42,.16);
  --r:18px;
  --badge:130px;

  /* Frost（“3%くらい”の気配） */
  --frost-blur: 3px;
  --frost-opacity: .06;

  /* Hero title stroke color（黒→深群青寄り） */
  --title-stroke: #1b274d;
}

body{
  color:var(--ink);
  font-family:'Noto Sans JP',system-ui,-apple-system,"Segoe UI",Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
  line-height:1.85;
  background:#ffffff;
}

/* ===== 背景：固定レイヤー（iOSでも切れない） ===== */
.global-bg{
  position:fixed; inset:0; z-index:-1; pointer-events:none;
  background:
    radial-gradient(120% 80% at 10% -10%, #ffe9f6 0 45%, transparent 46%),
    radial-gradient(120% 80% at 95% 0%,  #e6f7ff 0 45%, transparent 46%),
    radial-gradient(120% 80% at 50% 115%, #fff6d9 0 45%, transparent 46%),
    linear-gradient(180deg,#fff 0%,#f9fbff 45%,#ffffff 100%);
  background-repeat:no-repeat;
  background-size:cover,cover,cover,cover;
  background-position:10% -10%, 95% 0%, 50% 115%, 0 0;
  will-change:transform;
  transform:translateZ(0);
}

.container{width:min(980px,92vw);margin-inline:auto}
.section{padding:28px 0;position:relative}

/* ===== 手書き見出し（1文字出現） ===== */
.section-title{
  margin:0 0 16px; font-weight:900;
  font-size:clamp(20px,5.8vw,28px); letter-spacing:.02em;
  position:relative;
}
.section-title.hand{
  font-family:'Zen Kaku Gothic New','Noto Sans JP',sans-serif;
  font-weight:900; line-height:1.22; text-shadow:none;
}
.section-title .underline{
  display:block; height:6px; width:100%;
  background:linear-gradient(90deg,#7bd6ff,#1480ff);
  border-radius:6px; opacity:.95; margin-top:8px; position:relative; overflow:hidden;
}
.section-title.in .underline::after{
  content:""; position:absolute; inset:0;
  transform:translateX(-120%) skewX(-20deg);
  background:linear-gradient(120deg,transparent,rgba(255,255,255,.7),transparent);
  animation:u-shine .9s ease .2s forwards;
}
@keyframes u-shine{to{transform:translateX(120%) skewX(-20deg)}}

.hand span.char{display:inline-block;opacity:0;transform:translateY(14px) rotate(var(--rot,0)) scale(.92);filter:blur(2px)}
.hand.in span.char{animation:charPop .6s cubic-bezier(.2,.8,.2,1) forwards;animation-delay:var(--d,0ms)}
@keyframes charPop{40%{transform:translateY(-6px) rotate(var(--rot,0)) scale(1.02);filter:blur(0);opacity:1}100%{transform:translateY(0) rotate(0) scale(1);filter:blur(0);opacity:1}}

/* ===== 固定ラベル（ガラス） ===== */
.site-title{
  position:fixed; top:14px; left:4vw; z-index:90;
  font-weight:900; font-size:12px; color:#2f2f2f;
  padding:6px 12px; border-radius:999px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,.18));
  box-shadow:
    0 8px 24px rgba(0,0,0,.16),
    inset 0 12px 18px rgba(255,255,255,.22),
    inset 0 -10px 16px rgba(0,0,0,.06);
  -webkit-backdrop-filter: blur(14px) saturate(1.25) contrast(1.05);
  backdrop-filter: blur(14px) saturate(1.25) contrast(1.05);
}
.site-title::after{
  content:""; position:absolute; inset:2px; border-radius:999px; pointer-events:none;
  background:linear-gradient(120deg, rgba(255,255,255,.38) 0%, rgba(255,255,255,.18) 18%, rgba(255,255,255,0) 40%);
  mix-blend-mode:screen;
}

/* ===== HERO ===== */
.hero{position:relative; min-height:62svh; display:grid; place-items:end start; overflow:hidden}
.hero .hero-bg{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; object-position:center 30%; /* 顔に帯がかからないよう上寄せ気味 */
}
.hero-overlay{
  position:absolute; inset:0;
  /* 下部を締めてテキストを読みやすく */
  background:linear-gradient(180deg,rgba(0,0,0,0) 0,rgba(0,0,0,.14) 72%,rgba(0,0,0,.24));
}
.hero-inner{
  position:relative; z-index:1; width:100%; padding:14px 0 20px;
  /* 下詰め寄りで、顔に被りにくい配置 */
  display:grid; align-content:end; min-height:inherit;
}

/* リード（「私たちOCサポーターも…」） */
.lead{
  width:min(900px,92vw); margin:0 auto 8px;
  background:rgba(255,255,255,.24); backdrop-filter:blur(2px);
  border-radius:999px; padding:8px 14px; font-weight:700; font-size:14px;
  display:flex; gap:.6ch; align-items:center;
  box-shadow:0 10px 14px rgba(0,0,0,.05);
}
.lead .dot{width:10px;height:10px;border-radius:50%;background:radial-gradient(#7bd6ff,#1480ff)}
.lead .lead-text{white-space:nowrap}

/* ヒーロー見出し：縁取り色を深群青に変更 */
.title{
  width:min(900px,92vw);
  margin:0 auto 10px;
  font-weight:900;
  font-size:clamp(22px,6.5vw,34px);
  line-height:1.16;
  color:#fff;
  position:relative;
}
.title span{
  display:block;
  text-shadow:
    -1.2px -1.2px 0 var(--title-stroke),
     1.2px -1.2px 0 var(--title-stroke),
    -1.2px  1.2px 0 var(--title-stroke),
     1.2px  1.2px 0 var(--title-stroke),
     0 2px 6px rgba(0,0,0,.35);
}

/* ガラス質感バッジ（ヒーロー）：透明度アップ */
.glass-badges{
  width:min(900px,92vw);
  margin:8px auto 12px;
  display:flex; gap:8px; flex-wrap:nowrap;
  overflow:auto; padding-bottom:2px;
}
.g-badge{
  display:inline-flex; align-items:center; gap:.5ch;
  padding:8px 12px; border-radius:999px; font-weight:900; font-size:12px;
  color:#0b1224; white-space:nowrap;
  background:linear-gradient(180deg,rgba(255,255,255,.36),rgba(255,255,255,.20));
  box-shadow:0 10px 22px rgba(15,23,42,.14), inset 0 1px 0 rgba(255,255,255,.7);
  border:1px solid rgba(0,0,0,.06);
  -webkit-backdrop-filter:blur(10px) saturate(1.1);
  backdrop-filter:blur(10px) saturate(1.1);
}

/* Buttons（オーバーラン防止＋ガラス感） */
.btnrow{width:min(900px,92vw); margin:0 auto; display:flex; gap:10px}
.btn{
  --c1:#000; --c2:#333;
  flex:1; display:flex; justify-content:center; align-items:center; gap:.5ch;
  height:48px; padding:0 14px; border-radius:999px; font-weight:900;
  font-size:clamp(12.5px,3.4vw,14px); /* “オーキャンについて”が収まるサイズ */
  color:#fff; text-decoration:none;
  position:relative; overflow:hidden; white-space:nowrap; isolation:isolate;
  background:linear-gradient(180deg,var(--c1),var(--c2));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.25), 0 10px 22px rgba(15,23,42,.20);
}
.btn::before{
  content:""; position:absolute; inset:0 0 55% 0;
  background:linear-gradient(180deg,rgba(255,255,255,.45),transparent);
  pointer-events:none;
  /* はみ出し対策：親に overflow:hidden; isolation:isolate; 済 */
}
.btn:active{transform:translateY(1px)}
.btn-blue{--c1:#2b8dff; --c2:#0f6de0}
.btn-messaging{--c1:var(--line); --c2:var(--line2)}
.btn-black{--c1:#161616; --c2:#0b0b0b}

/* “キラッ” */
.sweep{position:relative; overflow:hidden}
.sweep.in::after{
  content:""; position:absolute; inset:0;
  transform:translateX(-120%) skewX(-20deg);
  background:linear-gradient(120deg,transparent,rgba(255,255,255,.42),transparent);
  animation:shine .9s ease forwards;
}
@keyframes shine{to{transform:translateX(120%) skewX(-20deg)}}

/* ===== Grid / Card ===== */
.grid{display:grid; gap:16px}
@media(min-width:720px){.grid{grid-template-columns:repeat(3,1fr)}}

.card{position:relative; padding:16px; border-radius:var(--r); box-shadow:var(--shadow); background:#fff; overflow:hidden}
.dept-sweets{--tone:#bff3ec}
.dept-imagine{--tone:#ffe0ec}
.dept-hoiku{--tone:#ffeec0}
.card::before{content:""; position:absolute; inset:0; background:linear-gradient(135deg, color-mix(in srgb,var(--tone) 68%,#fff 32%), #fff); z-index:-1}

.card-header{display:grid; grid-template-columns:1fr auto; align-items:center; gap:14px; min-height: calc(var(--badge) * .72 + 28px); margin-bottom:12px}
.sticker{display:inline-block; background:#fff; color:#111; padding:6px 10px; border-radius:10px; font-weight:900; font-size:12px; box-shadow:0 8px 18px rgba(0,0,0,.12); margin-bottom:8px}
.meta{line-height:1.25; margin:2px 0 0; font-weight:700}
.hook{margin:8px 0 0; padding:8px 12px; font-weight:900; line-height:1.45; color:#0d2b6f; background:linear-gradient(180deg,#eef4ff,#ffffff); border-left:6px solid #78a9ff; border-radius:10px; box-shadow:0 6px 14px rgba(13,43,111,.08) inset}
.badge{width:var(--badge); height:var(--badge); border-radius:999px; background:#fff; box-shadow:0 10px 22px rgba(0,0,0,.16), 0 0 0 6px rgba(255,255,255,.95); overflow:hidden; justify-self:end}
.badge img{width:100%; height:100%; object-fit:cover; object-position:center 30%}

.card .photos{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:12px}
.card .photos img{width:100%; aspect-ratio:16/9; object-fit:cover; border-radius:12px; box-shadow:0 8px 22px rgba(15,23,42,.12); background:#0001}

/* ===== Flow / Guide ===== */
.step{display:grid; gap:10px; background:#fff; border-radius:16px; box-shadow:var(--shadow); overflow:hidden}
.step img{width:100%; aspect-ratio:16/10; object-fit:cover; background:#0001}
.step .body{padding:12px 14px}
.num{display:inline-block; background:linear-gradient(180deg,#1480ff,#7bd6ff); color:#fff; font-weight:900; padding:.2rem .6rem; border-radius:999px; margin-bottom:6px}

.guide .glist{list-style:none; margin:0; padding:0; display:grid; gap:12px}
.gitem{display:grid; grid-template-columns:auto 1fr; gap:10px; align-items:center}
.gavatar{width:60px; height:60px; border-radius:999px; overflow:hidden; box-shadow:0 8px 18px rgba(0,0,0,.14); background:linear-gradient(180deg,#e6f5ff,#fff); display:grid; place-items:center}
.gavatar img{width:100%; height:100%; object-fit:cover; object-position:center 35%}
.gcard{background:#fff; border-radius:14px; box-shadow:var(--shadow); padding:10px 12px}

/* ===== Footer / 固定CTA ===== */
.footer{padding:42px 0 96px; text-align:center; color:var(--muted)}
.sticky-cta{
  position:fixed; left:0; right:0; bottom:-80px;
  display:flex; gap:10px; padding:10px 14px;
  background:rgba(255,255,255,.92); backdrop-filter:blur(10px);
  box-shadow:0 -12px 24px rgba(0,0,0,.14); transition:bottom .28s; z-index:60;
}
.sticky-cta .btn{height:46px}
.sticky-cta.show{bottom:0}

/* ===== Reveal / Parallax ===== */
.reveal{opacity:0; transform:translateY(26px)}
.reveal.in{opacity:1; animation:catch .8s cubic-bezier(.2,.8,.2,1) both}
@keyframes catch{0%{transform:translateY(26px)} 60%{transform:translateY(-8px)} 100%{transform:translateY(0)}}

/* ===== 細かな調整 ===== */
@media (max-width:560px){ :root{--badge:112px} .card-header{gap:12px} .hook{font-size:.98rem} }

/* 知る・感じる… の字詰めだけ */
#flow .section-title{letter-spacing:-0.02em; line-height:1.16}
#flow .section-title.hand span.char{margin-right:-0.02em}

/* ===== 1分解説動画（最下段） ===== */
.shorts{padding:34px 0 20px}
.glass-toggle{
  width:min(900px,92vw); margin:0 auto 14px;
  display:flex; align-items:center; justify-content:center; gap:.6ch;
  padding:14px 18px; border-radius:999px; font-weight:900;
  color:#0b1224; text-decoration:none; cursor:pointer;
  background:linear-gradient(180deg,rgba(255,255,255,.55),rgba(255,255,255,.32));
  box-shadow:0 10px 28px rgba(15,23,42,.16), inset 0 1px 0 rgba(255,255,255,.6);
  backdrop-filter:blur(12px) saturate(1.1); -webkit-backdrop-filter:blur(12px) saturate(1.1);
  border:1px solid rgba(255,255,255,.7);
}
.glass-toggle .dot{width:10px;height:10px;border-radius:50%;background:radial-gradient(#7bd6ff,#1480ff)}
.glass-toggle small{opacity:.7;font-weight:700}

#shortsPanel{display:none}
#shortsPanel.open{display:block}

/* ガラスカード（動画行） */
.s-card{
  width:min(900px,92vw); margin:12px auto; padding:14px; border-radius:18px;
  background:linear-gradient(180deg,rgba(255,255,255,.66),rgba(255,255,255,.40));
  border:1px solid rgba(255,255,255,.75);
  box-shadow:0 14px 30px rgba(15,23,42,.14), inset 0 1px 0 rgba(255,255,255,.7);
  backdrop-filter:blur(14px) saturate(1.15); -webkit-backdrop-filter:blur(14px) saturate(1.15);
}
.s-head{display:grid; grid-template-columns:1fr auto; align-items:center; gap:10px}
.s-title{font-weight:900; margin:0 0 4px}
.s-desc{margin:0 0 10px; color:#475569; line-height:1.55; letter-spacing:.01em}
.s-actions{display:flex; gap:8px; align-items:center; justify-content:flex-end}
.s-icon{
  width:42px; height:42px; border-radius:999px; display:inline-flex;
  align-items:center; justify-content:center; border:none; cursor:pointer;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.45), 0 8px 18px rgba(15,23,42,.18);
  background:linear-gradient(180deg,rgba(0,0,0,.06),rgba(0,0,0,.12));
  color:#0b1224;
}
.s-icon svg{width:18px;height:18px;display:block}
.s-icon.play{background:linear-gradient(180deg,#2b8dff,#0f6de0); color:#fff}
.s-icon:active{transform:translateY(1px)}

/* モーダル（サイト内再生） */
.player-backdrop{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.48); z-index:120; padding:20px;
}
.player-backdrop.open{display:grid}
.player-modal{
  width:min(420px,90vw); aspect-ratio:9/16; background:#000; border-radius:16px; overflow:hidden;
  box-shadow:0 20px 60px rgba(0,0,0,.35); position:relative;
}
.player-modal iframe{width:100%; height:100%; border:0}
.player-close{
  position:absolute; top:8px; right:8px; z-index:2;
  width:36px; height:36px; border-radius:999px; border:none; cursor:pointer;
  background:rgba(255,255,255,.85); backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  display:flex; align-items:center; justify-content:center; font-weight:900;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
}

/* ====== 日程UI（直近2件・紫ピル） ====== */
.dates-wrap{width:min(900px,92vw); margin:12px auto 0}
.dates-sub{margin:0 0 8px; color:#475569; font-weight:800; display:flex; align-items:center; gap:.6ch}
.soon{
  display:inline-flex; align-items:center; gap:.4ch; margin-left:.6ch; padding:.22rem .6rem;
  border-radius:999px; font-weight:900; font-size:12px; color:#0b1224;
  background:linear-gradient(180deg,rgba(255,255,255,.66),rgba(255,255,255,.40));
  border:1px solid rgba(0,0,0,.06);
}
.dates{display:grid; grid-auto-flow:column; grid-auto-columns:1fr; gap:10px; overflow-x:auto; padding:2px}
.pill{
  display:flex; align-items:center; justify-content:center; gap:.5ch;
  padding:11px 12px; border-radius:999px; font-weight:900; color:#fff; text-decoration:none; white-space:nowrap;
  background:linear-gradient(180deg,var(--brandStart),var(--brandEnd));
  box-shadow:0 8px 18px rgba(15,23,42,.18), inset 0 1px 0 rgba(255,255,255,.35);
}
.pill small{opacity:.9; font-weight:800}

/* =========================================================
   Gooey + Frost（ON: body.fx-gooey）
   ========================================================= */
.fx-gooey .g-badge{
  -webkit-backdrop-filter: blur(var(--frost-blur)) saturate(1.05);
  backdrop-filter: blur(var(--frost-blur)) saturate(1.05);
  border-color: rgba(255,255,255,.50);
}

.fx-gooey .btn{
  isolation:isolate;
}
.fx-gooey .btn::after{
  content:"";
  position:absolute; inset:0;
  border-radius:inherit;
  background: rgba(255,255,255,var(--frost-opacity));
  -webkit-backdrop-filter: blur(var(--frost-blur));
  backdrop-filter: blur(var(--frost-blur));
  pointer-events:none;
}

.fx-gooey .pill{
  -webkit-backdrop-filter: blur(var(--frost-blur)) saturate(1.05);
  backdrop-filter: blur(var(--frost-blur)) saturate(1.05);
  box-shadow:
    0 8px 18px rgba(15,23,42,.14),
    inset 0 1px 0 rgba(255,255,255,.45);
}

/* （任意）ヒーロー下辺のとろけ感をわずかに：視覚ノイズ軽減 */
.fx-gooey .hero-overlay{
  backdrop-filter: blur(1px) saturate(1.02);
}

/* =========================================================
   端末別の細調整（iOS Safari系でのにじみ対策）
   ========================================================= */
@supports (-webkit-touch-callout: none) {
  .btn, .g-badge, .pill{
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}