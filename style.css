/* ===== 基本設定 ===== */
:root{
  --ink:#0f172a; --muted:#6b7280;
  --accent:#0f7bff; --accent-2:#7bd6ff; --line:#00b900;
  --radius:20px; --shadow:0 16px 40px rgba(15,23,42,.16);
}
*{box-sizing:border-box}
html,body{margin:0}
body{
  color:var(--ink);
  font-family:'Noto Sans JP',system-ui,-apple-system,Segoe UI,Roboto,"Hiragino Kaku Gothic ProN","Meiryo",sans-serif;
  line-height:1.8;
  /* 多層ソフトグラデ（固定） */
  background:
    linear-gradient(180deg,#fff7f0 0%,#fffdfc 24%,#ffffff 40%,#f7fbff 70%,#ffffff 100%),
    radial-gradient(120% 70% at 10% -10%, rgba(255,225,241,.35) 0 55%, transparent 56%),
    radial-gradient(120% 70% at 90% 0%, rgba(232,252,255,.35) 0 55%, transparent 56%),
    radial-gradient(120% 70% at 50% 115%, rgba(255,246,217,.35) 0 55%, transparent 56%);
  background-attachment: fixed,fixed,fixed,fixed;
}
.container{width:min(940px,92vw); margin-inline:auto}
.section{padding:44px 0; transform:translateY(var(--parallaxY,0)); transition:transform .18s ease-out}

/* ラベル */
.site-title{
  position:fixed; top:12px; left:12px; z-index:1000;
  background:rgba(255,255,255,.9); padding:6px 10px; border-radius:12px; font-weight:900; font-size:14px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

/* ===== HERO ===== */
.hero{position:relative; min-height:64vh; display:grid; align-items:end; overflow:hidden}
.hero-bg{position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center 40%}
.hero-overlay{position:absolute; inset:0; background:linear-gradient(180deg,rgba(255,255,255,.0) 0%,rgba(255,255,255,.36) 55%,rgba(255,255,255,.2) 100%)}
.hero-vignette{position:absolute; left:0; right:0; bottom:0; height:44%; background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.18) 72%,rgba(0,0,0,.26) 100%)}
.hero-inner{position:relative; z-index:1; padding:18vh 0 24px}

.lead{
  display:inline-flex; align-items:center; gap:.6ch; margin:0 0 10px;
  background:rgba(255,255,255,.92); padding:.6rem .9rem; border-radius:999px; font-weight:700; box-shadow:0 8px 22px rgba(0,0,0,.14)
}
.lead .led{width:10px;height:10px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#7bd6ff, #0f7bff 60%); box-shadow:0 0 12px #7bd6ff}
.title{font-weight:900; font-size:clamp(26px,7.5vw,44px); line-height:1.15; margin:0 0 10px;}
.title span{display:block}

.cta-row{display:flex; gap:10px; flex-wrap:wrap}
.btn{position:relative; display:inline-flex; align-items:center; justify-content:center; overflow:hidden; isolation:isolate;
  padding:.62rem 1.1rem; font-size:1rem; font-weight:900; border-radius:999px; text-decoration:none}
.btn-primary{background:linear-gradient(180deg,#1480ff,#0f6de0); color:#fff}
.btn-line{background:linear-gradient(180deg,#00c100,#00a700); color:#fff}
.btn-ghost{background:linear-gradient(180deg,#111,#0a0a0a); color:#fff}

/* ===== 見出し ===== */
.section-title{display:inline-block; font-weight:900; font-size:clamp(22px,5.2vw,30px); margin:0 0 16px; color:#0b1224; position:relative}
.section-title::after{content:""; position:absolute; left:0; bottom:-6px; width:100%; height:6px; border-radius:6px; background:linear-gradient(90deg,#0f7bff,#7bd6ff); opacity:.7}
.hand{font-family:'Yomogi','Noto Sans JP',sans-serif; font-weight:400; line-height:1.25}

/* ===== “追いついてくる” 見出しアニメ ===== */
.catchup{transform:translateY(26px); opacity:0}
.catchup-in{animation:catchup .7s cubic-bezier(.22,1,.36,1) forwards}
@keyframes catchup{
  0%{transform:translateY(26px); opacity:0}
  50%{transform:translateY(6px); opacity:.9}
  100%{transform:translateY(0); opacity:1}
}

/* ===== 学生カード ===== */
.grid{display:grid; grid-template-columns:1fr; gap:18px}
@media (min-width:760px){ .grid{grid-template-columns:repeat(3,1fr)} }

.dept-sweets  { --c1:#d6f6f2; --c2:#c2f0ec; }
.dept-imagine { --c1:#ffe8f1; --c2:#ffdbea; }
.dept-hoiku   { --c1:#fff0c8; --c2:#ffe6b2; }

.student-card{
  position:relative; border-radius:18px; padding:16px 14px 14px; overflow:hidden;
  box-shadow:var(--shadow); background:linear-gradient(180deg,var(--c1),var(--c2));
}
.sticker{display:inline-block; font-weight:900; font-size:.82rem; background:#fff; padding:6px 10px; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,.12); margin-bottom:6px}
.badge{position:absolute; right:10px; top:10px; width:72px; height:72px; border-radius:50%; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.14)}
.badge img{width:100%;height:100%;object-fit:cover;object-position:center 30%}
.student-title{margin:0; font-weight:900}
.student-name{margin:2px 0 8px; font-size:1.3rem; font-weight:900}
.student-body{margin:0 0 10px; color:#233}
.student-photos{display:grid; grid-template-columns:repeat(2,1fr); gap:10px}
.student-photos img{width:100%; aspect-ratio:16/9; object-fit:cover; border-radius:12px; box-shadow:0 8px 22px rgba(15,23,42,.12)}

/* ===== 当日の流れ ===== */
.steps{display:grid; gap:14px}
.step{display:grid; grid-template-columns:1fr; background:#fff; border-radius:18px; overflow:hidden; box-shadow:var(--shadow)}
.step img{width:100%; display:block; aspect-ratio:16/10; object-fit:cover}
.step .body{padding:12px 14px}
.step .num{display:inline-block; font-weight:900; color:#fff; background:linear-gradient(180deg,#0f7bff,#7bd6ff); padding:.2rem .6rem; border-radius:999px; margin-bottom:6px}

/* ===== ガイド（ストーリー） ===== */
.guide-steps{list-style:none; padding:0; margin:0; display:grid; gap:14px}
.gstep{position:relative; display:grid; grid-template-columns:64px 1fr; gap:10px; align-items:start}
.gline{position:absolute; left:32px; top:0; bottom:0; width:2px; background:linear-gradient(#bfe2ff,#e3f2ff)}
/* 透過PNGの下地を柔らかい色で */
.gavatar-wrap{width:64px;height:64px;border-radius:50%;display:grid;place-items:center;box-shadow:0 8px 22px rgba(0,0,0,.12)}
.tone-a{background:radial-gradient(circle at 30% 30%, #e9f6ff, #dff0ff)}
.tone-b{background:radial-gradient(circle at 30% 30%, #eaf7f0, #dbf0e5)}
.tone-c{background:radial-gradient(circle at 30% 30%, #fff0f6, #ffe6ef)}
.tone-d{background:radial-gradient(circle at 30% 30%, #fff7e7, #ffefd3)}
.gavatar{width:92%;height:92%;object-fit:cover;border-radius:50%}
/* 顔が入るようにオブジェクト位置を少し上寄せ */
.face-top{object-position:50% 20%}
.face-mid{object-position:50% 32%}

.gcard{background:#fff; border-radius:16px; padding:12px 14px; box-shadow:var(--shadow)}
.ghead{font-weight:900; margin-bottom:6px}
.gtime{display:inline-block; background:#e8f2ff; color:#0b3d8c; border-radius:999px; padding:.2rem .6rem; font-weight:900}
.glist{margin:0; padding-left:1.1em}
.glist li{margin:.25em 0}
.glink{color:#0f7bff; font-weight:900; text-decoration:underline}

/* ===== フッター & スティッキーバー ===== */
.footer{padding:40px 0 80px; text-align:center; color:var(--muted)}
.footer-cta{display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-bottom:12px}
.sticky-cta{position:fixed; left:0; right:0; bottom:10px; display:flex; gap:10px; padding:10px 14px; z-index:2000;
  backdrop-filter:blur(10px); background:rgba(255,255,255,.85); box-shadow:0 -10px 24px rgba(0,0,0,.12)}
.sticky-cta .btn{flex:1}

/* ===== スクロール連動：iOSでも軽いパララックス ===== */
.parallax-block{transform:translateY(var(--parallaxY,0)); will-change:transform}

/* ===== 画面に入ったら「キラッ」控えめ ===== */
.sweep-target{position:relative; overflow:hidden; isolation:isolate}
.sweep-target::before{
  content:""; position:absolute; inset:0; pointer-events:none;
  background:linear-gradient(110deg, transparent 0 40%, rgba(255,255,255,.0) 41%,
                                   rgba(255,255,255,.55) 50%,
                                   rgba(255,255,255,.0) 59%, transparent 60% 100%);
  transform:translateX(-120%); opacity:0; filter:blur(.8px);
}
.sweep-target.in-view::before{animation:sweep 1.1s ease-out forwards}
@keyframes sweep{0%{transform:translateX(-120%);opacity:0}15%{opacity:.55}100%{transform:translateX(120%);opacity:0}}

@media (max-width:520px){
  .hero{min-height:56vh}
  .hero-inner{padding:14vh 0 20px}
  .lead{font-size:.95rem}
  .title{font-size:clamp(24px,8vw,36px)}
  .btn{padding:.58rem 1rem}
  .badge{width:68px;height:68px}
  .student-name{font-size:1.22rem}
}

/* モーション低減 */
@media (prefers-reduced-motion:reduce){
  .parallax-block{transition:none}
  .sweep-target::before{animation:none !important; transform:none !important; opacity:0 !important}
  .catchup,.catchup-in{animation:none !important; transform:none !important; opacity:1 !important}
}